package encryptdecrypt;

import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        //take in arguments, mode first, then the message, then the shift key

        Scanner scan = new Scanner(System.in);
        String mode = "enc";
        String message = "";
        int shift = 0;

        if(args.length > 0) { //check for arguments on command line
            for(int i = 0; i < args.length; i += 2) {
                if("-mode".equalsIgnoreCase(args[i])) {
                    mode = args[i + 1];
                } else if("-key".equalsIgnoreCase(args[i])) {
                    shift = Integer.parseInt(args[i + 1]);
                } else if("-data".equalsIgnoreCase(args[i])) {
                    message = args[i + 1];
                }
            }
        } else { //use System input if no arguments
            mode = scan.nextLine();
            message = scan.nextLine();
            shift = scan.nextInt();
        }

        if(mode.equals("enc")) {
               encrypt(message, shift);
        } else if (mode.equals("dec")) {
            decrypt(message, shift);
        } else {
            System.out.println("Please try again, and use \"enc\" for encrypt and \"dec\" for decrypt");
        }


    }

    //if mode is "enc", then the message and key will be sent to this method for encryption
    public static void encrypt(String message, int shift) {
        String encodedMessage = "";

            for(int i = 0; i < message.length(); i++) {
                char ch = message.charAt(i);
                //if char is within this range, the letter will be encrypted
                if(ch >= ' ' && ch <= '~') {
                    ch = (char)(((ch - ' ' + shift) % 95) + ' ');
                    encodedMessage += ch;
                } else {
                    encodedMessage += ch;
                }
            }
        System.out.println(encodedMessage);
    }

    //if mode is "dec", then the message and key will be sent to this method for decryption        
    public static void decrypt(String message, int shift) {
        String decodedMessage = "";

        for(int i = 0; i < message.length(); i++) {
            char ch = message.charAt(i);
            //if char is within this range, the letter will be decrypted
            if(ch >= ' ' && ch <= '~') {
                ch = (char) (((ch - ' ' - shift) % 95) + ' ');
                decodedMessage += ch;
            } else {
                decodedMessage += ch;
            }
        }
        System.out.println(decodedMessage);
    }
}
